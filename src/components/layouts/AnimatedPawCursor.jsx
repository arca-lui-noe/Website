"use client";

import { useEffect, useRef, useState } from "react";

export default function VeterinaryClickEffect() {
  const clickContainerRef = useRef(null);
  const [isMobile, setIsMobile] = useState(true); // Default to true, check will confirm

  useEffect(() => {
    // Check if device is mobile or desktop
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
    };
    
    checkMobile(); // Initial check
    window.addEventListener('resize', checkMobile); // Listen for resize changes
    
    // If mobile, don't attach click effects
    if (isMobile) {
      return () => {
        window.removeEventListener('resize', checkMobile);
      };
    }

    // Desktop-only effect logic
    const handleClick = (e) => {
      if (clickContainerRef.current) {
        const paw = document.createElement("div");
        paw.className = "click-mark";
        paw.style.left = `${e.clientX}px`;
        paw.style.top = `${e.clientY}px`;
        
        const rotation = Math.random() * 40 - 20; // -20 to +20 degrees
        const scale = 0.8 + Math.random() * 0.4; // Size variation 0.8-1.2
        paw.style.transform = `translate(-50%, -50%) rotate(${rotation}deg) scale(${scale})`;
        
        const animalTypes = [
          { 
            type: 'dog', 
            colors: ['#4a90e2', '#357abd', '#2c5aa0', '#1e3a8a'],
            svg: `<svg width='36' height='36' viewBox='0 0 461 440' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M197.775 30.4864C185.775 11.9531 167.041 -2.74024 144.041 0.433092C113.228 7.29975 101.561 33.7397 98.4948 62.4863C97.8015 68.873 97.0281 71.673 97.4948 78.4863C98.7348 96.6863 103.335 113.286 112.428 129.153C123.095 147.78 146.415 167.033 169.375 162.993C191.775 159.06 205.575 142.193 211.641 121.153C220.228 91.4063 214.588 56.433 197.775 30.4864Z' fill='COLOR' fill-opacity='0.8'/><path d='M358.134 46.4864C350.908 20.7664 334.014 -3.42023 304.041 0.40643C265.455 7.63309 244.095 51.4197 244.041 87.8196V97.1529C244.081 124.806 257.055 155.94 286.708 162.46C292.148 163.66 297.148 164.219 302.708 163.419C351.854 156.353 369.814 88.033 358.134 46.4864Z' fill='COLOR' fill-opacity='0.8'/><path d='M109.375 195.819C109.815 157.753 84.3748 107.646 41.3749 107.273C14.5083 109.713 0.348277 129.86 0.041611 155.82C-0.0650555 165.14 -0.131722 171.939 2.04161 181.153C9.69493 213.473 36.3882 245.499 72.0415 243.766C96.2415 242.593 109.121 217.486 109.375 195.819Z' fill='COLOR' fill-opacity='0.8'/><path d='M428.041 108.7C422.321 107.246 411.308 107.553 405.374 108.7C375.134 117.286 351.081 154.126 350.908 185.153V205.153C354.094 225.886 368.841 243.299 390.708 243.806C431.401 244.739 459.614 201.073 460.041 163.82C460.281 141.926 451.534 115.553 428.041 108.7Z' fill='COLOR' fill-opacity='0.8'/><path d='M288.028 197.273C270.775 180.886 243.655 172.166 220.041 175.046C197.828 178.406 182.028 183.793 165.428 199.939L130.655 242.486L81.7748 289.153C64.6815 309.099 57.0682 329.673 57.3749 355.819C57.8815 398.952 91.2815 439.606 136.041 439.819C152.001 439.899 156.055 440.112 172.041 436.592C188.681 432.912 206.961 426.686 224.041 426.486C240.148 426.299 249.561 427.112 265.375 430.792C280.414 434.312 295.081 439.632 310.708 439.819C325.801 439.992 335.028 439.739 349.374 433.886C377.761 422.286 399.668 392.086 400.041 361.152C400.214 346.233 400.228 338.313 395.348 323.819C383.161 287.579 350.134 268.926 325.494 242.486L288.028 197.273Z' fill='COLOR' fill-opacity='0.8'/></svg>`
          },
          { 
            type: 'cat', 
            colors: ['#e74c3c', '#c0392b', '#a93226', '#922b21'],
            svg: `<svg width="36" height="36" viewBox="0 0 140 154" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M44.9201 17.1201C48.1553 9.88168 57.0609 2.96647 64.7601 1.08806C67.8001 0.345664 70.3153 0.444863 73.4001 0.480063C75.7585 0.508863 78.1809 1.10406 80.4401 1.76007C91.3906 4.94087 101.451 14.3681 101.56 26.4001C104.584 25.9265 106.904 24.2209 112.12 24.1601C117.954 24.0929 121.432 25.0785 126.52 27.9297C129.323 29.5009 132.661 32.2849 134.744 34.7201C145.042 46.7521 138.178 64.8354 129.992 76.0002C128.427 78.1314 126.648 80.1314 124.866 82.0802L115.09 91.3602C112.139 94.7106 109.371 98.109 107.019 101.92C104.69 105.699 103.464 110.544 101.979 114.72L98.8626 122.72C93.3714 135.594 85.7201 146.247 72.1201 151.216C69.1057 152.317 64.1137 153.402 60.9201 153.44C55.3393 153.504 53.2305 153.466 47.8001 151.732C41.2113 149.626 35.0193 146.743 30.2289 141.6C21.5152 132.247 18.8784 115.267 18.0112 102.88L17.3712 94.8802L17.08 91.6802C17.0352 87.7186 16.664 84.5378 15.1856 80.8002C12.9936 75.2674 8.99683 70.6978 6.28322 65.4402C2.74082 58.573 0.974417 52.013 0.411216 44.3201L0.120015 41.1201C0.0528145 35.3729 -0.0495868 32.8769 2.18402 27.3601C3.19522 24.8673 5.11842 21.3537 6.89442 19.3601C14.5616 10.7585 26.6833 9.01768 37.2401 12.8609C40.2993 13.9777 42.2705 15.3537 44.9201 17.1201ZM96.1202 36.0001L97.0802 28.6401C97.0994 24.3073 96.0306 20.1441 93.6562 16.4801C91.925 13.8081 88.9074 11.0593 86.2001 9.37928C78.5969 4.66887 68.6865 3.20647 60.6001 7.61928C56.5105 9.85288 53.5761 12.7841 50.7985 16.4801C48.8721 19.0465 47.0801 22.0129 46.2001 25.1201L41.7073 20.6689C39.3457 18.6785 36.0689 17.1969 33.0801 16.4449C27.7041 15.0977 22.2097 15.0689 17.08 17.4081C9.44803 20.8897 5.53762 28.5889 4.89442 36.6401C4.80802 37.6929 4.58082 38.4385 4.65762 39.5201C5.22722 47.5073 6.00163 54.237 9.50243 61.6002C13.0864 69.1458 17.7744 72.6562 20.4624 82.0802C21.7169 86.477 21.5088 90.7234 21.9344 95.2002C23.3905 110.503 23.9569 131.927 37.5601 141.869C40.5553 144.058 43.9793 145.552 47.4801 146.72C54.1329 148.941 54.1105 148.65 60.9201 148.64C64.1009 148.634 68.2001 147.818 71.1601 146.656C83.1665 141.936 90.3794 131.434 95.0162 119.84C98.8274 110.317 99.8194 103.37 106.159 94.8802C109.656 90.1986 112.709 87.0818 116.92 83.053L122.626 77.6002C128.658 70.9218 135.147 59.6322 135.16 50.4002V48.1601C135.131 45.6769 134.463 42.9857 133.272 40.8001C129.925 34.6497 121.506 28.9697 114.36 28.9601C109.899 28.9537 106.568 29.2865 102.52 31.4881C100.226 32.7361 98.2418 34.4929 96.1202 36.0001ZM69.5601 11.1873C71.7937 10.8801 75.0833 10.9409 77.2401 11.6065C85.7137 14.2177 89.8481 23.5777 90.0369 31.8401C90.2449 41.0369 85.173 52.2402 75.9601 55.3538C73.6049 56.1506 72.3121 56.189 69.8801 56.1602C61.9185 56.0642 56.8657 49.7218 54.6289 42.7201C53.3649 38.7585 53.5153 36.8513 53.5601 32.8001C53.6721 23.3249 59.9825 13.3217 69.5601 11.1873ZM71.1601 14.3361C61.0289 16.2241 56.6513 26.2721 56.7601 35.6801C56.8433 42.8161 60.9617 51.3122 68.6001 52.6658C68.6239 52.6699 68.6475 52.6741 68.671 52.6782C69.8194 52.8795 70.6085 53.0179 71.8001 52.8674C81.0641 51.7026 86.5073 41.7569 86.5201 33.1201V30.8801C86.4209 22.5025 80.3825 13.4209 71.1601 14.3361ZM22.2 20.7105H24.4401C26.5841 20.6305 27.7809 20.6529 29.8801 21.2929C39.2561 24.1537 45.8641 35.1009 45.8801 44.6401V47.8401C45.8481 50.4994 45.0385 53.4562 43.8769 55.8402C40.8785 62.0098 36.1105 65.2002 29.2401 65.1202C26.5969 65.0882 24.5521 64.4386 22.2 63.277C12.728 58.6082 7.48003 47.2577 8.71203 36.9601C9.66563 28.9825 13.8672 22.3393 22.2 20.7105ZM23.4801 23.9329C16.4848 25.0945 12.0432 31.3313 11.96 38.2401V41.1201C12.0624 49.7954 19.48 61.4882 28.9201 61.6002C30.8401 61.6226 32.1937 61.6802 34.0401 60.9986C40.4017 58.6594 42.7505 51.4978 42.6801 45.2801C42.5649 35.3505 34.5393 22.8929 23.4801 23.9329ZM111.16 35.1809C121.355 33.8721 129.595 40.1217 129.72 50.7202C129.746 52.9218 129.707 54.9538 129.237 57.1202C126.847 68.1602 117.055 77.7314 105.4 77.6002C96.501 77.4978 90.4626 70.605 90.3602 61.9202V59.6802C90.3762 49.9458 97.4034 40.0833 106.36 36.4641C107.954 35.8209 109.48 35.4913 111.16 35.1809ZM112.44 38.3329C103.167 39.8657 95.2754 47.7249 93.8802 57.1202C92.7634 64.6466 95.0258 72.4482 103.48 74.0514C104.728 74.285 105.723 74.461 107 74.3074C116.44 73.1906 124.379 65.1106 126.066 55.8402C127.423 48.3809 125.125 40.5953 116.92 38.6017C115.211 38.1857 114.181 38.1665 112.44 38.3329ZM58.6801 66.2146C74.3089 64.3074 85.7874 75.9202 89.813 90.0802C90.6994 93.2034 91.3138 98.0354 91.3202 101.28C91.3362 112.89 87.1378 124.688 78.8401 132.96C74.3921 137.392 68.1937 141.252 61.8801 142.151C58.3057 142.656 57.1345 142.656 53.5601 142.151C35.9761 139.655 27.7745 121.475 27.9601 105.44C28.1265 91.309 36.2001 75.485 49.0801 69.0466C52.3729 67.3986 55.0865 66.7586 58.6801 66.2146ZM58.3601 70.333C38.1393 73.693 28.4209 98.7938 33.4033 116.96C36.3505 127.709 44.6929 138.26 56.7601 138.4C59.3553 138.429 61.2849 138.276 63.8001 137.53C76.5649 133.744 84.6705 120.944 86.6993 108.32C87.2209 105.075 87.1665 103.216 87.1601 100C87.1409 87.7442 79.7649 74.0962 67.3201 70.8002C64.8497 70.1474 60.9169 70.0898 58.3601 70.333Z" fill="COLOR"/>
<path d="M58.3601 70.333C38.1393 73.693 28.4209 98.7938 33.4033 116.96C36.3505 127.709 44.6929 138.26 56.7601 138.4C59.3553 138.429 61.2849 138.276 63.8001 137.53C76.5649 133.744 84.6705 120.944 86.6993 108.32C87.2209 105.075 87.1665 103.216 87.1601 100C87.1409 87.7442 79.7649 74.0962 67.3201 70.8002C64.8497 70.1474 60.9169 70.0898 58.3601 70.333Z" fill="COLOR"/>
<path d="M23.4801 23.9329C16.4848 25.0945 12.0432 31.3313 11.96 38.2401V41.1201C12.0624 49.7954 19.48 61.4882 28.9201 61.6002C30.8401 61.6226 32.1937 61.6802 34.0401 60.9986C40.4017 58.6594 42.7505 51.4978 42.6801 45.2801C42.5649 35.3505 34.5393 22.8929 23.4801 23.9329Z" fill="COLOR"/>
<path d="M71.1601 14.3361C61.0289 16.2241 56.6513 26.2721 56.7601 35.6801C56.8433 42.8161 60.9617 51.3122 68.6001 52.6658L68.671 52.6782C69.8194 52.8795 70.6085 53.0179 71.8001 52.8674C81.0641 51.7026 86.5073 41.7569 86.5201 33.1201V30.8801C86.4209 22.5025 80.3825 13.4209 71.1601 14.3361Z" fill="COLOR"/>
<path d="M112.44 38.3329C103.167 39.8657 95.2754 47.7249 93.8802 57.1202C92.7634 64.6466 95.0258 72.4482 103.48 74.0514C104.728 74.285 105.723 74.461 107 74.3074C116.44 73.1906 124.379 65.1106 126.066 55.8402C127.423 48.3809 125.125 40.5953 116.92 38.6017C115.211 38.1857 114.181 38.1665 112.44 38.3329Z" fill="COLOR"/>
</svg>
`
          },
          { 
            type: 'rabbit', 
            colors: ['#27ae60', '#229954', '#1e8449', '#186a3b'],
          svg: `<svg width='36' height='36' viewBox='0 0 461 440' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M197.775 30.4864C185.775 11.9531 167.041 -2.74024 144.041 0.433092C113.228 7.29975 101.561 33.7397 98.4948 62.4863C97.8015 68.873 97.0281 71.673 97.4948 78.4863C98.7348 96.6863 103.335 113.286 112.428 129.153C123.095 147.78 146.415 167.033 169.375 162.993C191.775 159.06 205.575 142.193 211.641 121.153C220.228 91.4063 214.588 56.433 197.775 30.4864Z' fill='COLOR' fill-opacity='0.8'/><path d='M358.134 46.4864C350.908 20.7664 334.014 -3.42023 304.041 0.40643C265.455 7.63309 244.095 51.4197 244.041 87.8196V97.1529C244.081 124.806 257.055 155.94 286.708 162.46C292.148 163.66 297.148 164.219 302.708 163.419C351.854 156.353 369.814 88.033 358.134 46.4864Z' fill='COLOR' fill-opacity='0.8'/><path d='M109.375 195.819C109.815 157.753 84.3748 107.646 41.3749 107.273C14.5083 109.713 0.348277 129.86 0.041611 155.82C-0.0650555 165.14 -0.131722 171.939 2.04161 181.153C9.69493 213.473 36.3882 245.499 72.0415 243.766C96.2415 242.593 109.121 217.486 109.375 195.819Z' fill='COLOR' fill-opacity='0.8'/><path d='M428.041 108.7C422.321 107.246 411.308 107.553 405.374 108.7C375.134 117.286 351.081 154.126 350.908 185.153V205.153C354.094 225.886 368.841 243.299 390.708 243.806C431.401 244.739 459.614 201.073 460.041 163.82C460.281 141.926 451.534 115.553 428.041 108.7Z' fill='COLOR' fill-opacity='0.8'/><path d='M288.028 197.273C270.775 180.886 243.655 172.166 220.041 175.046C197.828 178.406 182.028 183.793 165.428 199.939L130.655 242.486L81.7748 289.153C64.6815 309.099 57.0682 329.673 57.3749 355.819C57.8815 398.952 91.2815 439.606 136.041 439.819C152.001 439.899 156.055 440.112 172.041 436.592C188.681 432.912 206.961 426.686 224.041 426.486C240.148 426.299 249.561 427.112 265.375 430.792C280.414 434.312 295.081 439.632 310.708 439.819C325.801 439.992 335.028 439.739 349.374 433.886C377.761 422.286 399.668 392.086 400.041 361.152C400.214 346.233 400.228 338.313 395.348 323.819C383.161 287.579 350.134 268.926 325.494 242.486L288.028 197.273Z' fill='COLOR' fill-opacity='0.8'/></svg>`
          }
        ];
        
        const randomAnimalData = animalTypes[Math.floor(Math.random() * animalTypes.length)];
        const randomColor = randomAnimalData.colors[Math.floor(Math.random() * randomAnimalData.colors.length)];
        
        const svgWithColor = randomAnimalData.svg.replace(/COLOR/g, randomColor);
        const encodedSvg = encodeURIComponent(svgWithColor);
        
        paw.style.backgroundImage = `url("data:image/svg+xml,${encodedSvg}")`;
        paw.style.backgroundSize = 'contain';
        paw.style.backgroundRepeat = 'no-repeat';
        paw.style.backgroundPosition = 'center';
        paw.setAttribute('data-animal', randomAnimalData.type);
        
        clickContainerRef.current.appendChild(paw);

        setTimeout(() => {
          if (paw.parentNode) {
            paw.remove();
          }
        }, 2500);
      }
    };

    document.addEventListener("click", handleClick);

    return () => {
      document.removeEventListener("click", handleClick);
      window.removeEventListener('resize', checkMobile);
    };
  }, [isMobile]);

  if (isMobile) return null;

  return (
    <>
      <div ref={clickContainerRef} className="click-container" />
    </>
  );
}